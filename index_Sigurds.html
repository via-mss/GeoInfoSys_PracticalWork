<!DOCTYPE html>
<html>
	<head>
		<title>Skangals' map</title>
		<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"/>
		
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
			integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
			crossorigin=""/>
		<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>
	</head>
	<body>
		<div id="map" style="position: fixed; width: 1500px; height: 800px;"></div>
		<script>
			
			let layer1 = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
			maxZoom: 19,
			attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
			});
			let layer2 = L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
				maxZoom: 19,
				attribution: '© OpenStreetMap contributors, Tiles style by Humanitarian OpenStreetMap Team hosted by OpenStreetMap France'
			});
			let layer3 = L.tileLayer.wms('https://lvmgeoserver.lvm.lv/geoserver/ows?', {
				layers: 'public:Topo50',
				attribution: '© Latvijas Ģeotelpiskās informācijas aģentūra (LĢIA)'
			});
			let layer4 = L.tileLayer.wms('https://lvmgeoserver.lvm.lv/geoserver/ows?', {
				layers: 'public:Topo75LKS',
				attribution: '© Latvijas armijas Galvenā štāba Ģeodēzijas un topogrāfijas daļa'
			});
			
			//https://lvmgeoserver.lvm.lv/geoserver/ows?service=wms&request=GetCapabilities&layer=public:topo75LKS
			
			let bridgeLinesStyle = {
				"color": "#ae0f0f",
				"weight": 5,
				"opacity": 0.80
			};
			
			let geojsonBridges = {
				"type": "FeatureCollection",
				"name": "bridgesCollection",
				"crs": {"type": "name",
						"properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
				"features": 
					[{
						"type": "Feature",
						"properties": {
							"name": "Cablestay Bridge",
							"amenity": "Bridge",
							"popupContent": "This is the Valmiera's cablestay bridge"
						},
						"geometry": {
							"type": "LineString",
							//"coordinates": [[57.53264, 25.43466], [57.53141, 25.43407]]
							"coordinates": [[25.43466, 57.53264], [25.43407, 57.53141]]
						}
					}, 
					{
						"type": "Feature",
						"properties": {
							"name": "Car Bridge",
							"amenity": "Bridge",
							"popupContent": "This is the Valmiera's main bridge"
						},
						"geometry": {
							"type": "LineString",
							"coordinates": [[25.42382, 57.53644], [25.42447, 57.53567]]
						}
					}, 
					{
						"type": "Feature",
						"properties": {
							"name": "Iron Bridge",
							"amenity": "Bridge",
							"popupContent": "This is the Valmiera's old train bridge"
						},
						"geometry": {
							"type": "LineString",
							"coordinates": [[25.40800, 57.52853], [25.40920, 57.52808]]
						}
					}, 
					{
						"type": "Feature",
						"properties": {
							"name": "Circuit road Car Bridge",
							"amenity": "Bridge",
							"popupContent": "This is the Valmiera's circuit road bridge"
						},
						"geometry": {
							"type": "LineString",
							"coordinates": [[25.38526, 57.51469], [25.38697, 57.51408]]
						}
					}
					]
			};
			function onEachFeature(feature, layer) {
				if (feature.properties && feature.properties.popupContent) {
					layer.bindPopup(feature.properties.popupContent);
				}
			}
			
			let bridgeLayer = L.geoJSON(geojsonBridges, {
				style: bridgeLinesStyle,
				onEachFeature: onEachFeature
			});
			let baseLayers = {
				"OpenStreetMap": layer1,
				"OpenStreetMap.HOT": layer2,
				"LĢIS Topo50": layer3,
				"LA Topo75 (1940)": layer4
			};
			let overlayLayers = {
				"Bridges": bridgeLayer
			};
			
			let map = L.map('map', {
				layers: [layer1, bridgeLayer]
			}).setView([57.53498031573365, 25.417882669028025], 12);
			
			
			let layerControl = L.control.layers(baseLayers, overlayLayers).addTo(map);
			
			let markerVAIF = L.marker([57.541689595944675, 25.428120852779454]).addTo(map);
			markerVAIF.bindPopup("<b>Vidzeme University</b><br>Faculty of Engineering");
			
			let popupLatLng = L.popup();

			function onMapClick(e) {
				popupLatLng
					.setLatLng(e.latlng)
					.setContent("You clicked the map at:<br>Latitude: " + Number.parseFloat(e.latlng.lat).toFixed(5) + "<br>Longitude: " + Number.parseFloat(e.latlng.lng).toFixed(5))
					.openOn(map);
			}
			map.on('click', onMapClick);
			
			
			
			
			
			
			
		</script>
	</body>
</html>